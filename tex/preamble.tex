% ======================================================================
% preamble.tex  (v0.5.2.0) — shared packages, macros, and formatting
% ======================================================================

% --- Packages
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{amsmath,amssymb,amsthm,mathtools}
\usepackage{bm}
\usepackage{physics}
\usepackage{microtype}
\usepackage{enumitem}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{hyperref}
\usepackage[nameinlink,capitalise]{cleveref}

% --- Hyperref setup
\hypersetup{
  colorlinks=true,
  linkcolor=blue!50!black,
  citecolor=blue!50!black,
  urlcolor=blue!50!black,
  pdfauthor={},
  pdftitle={Boundary Information Mechanics (v1.0.2)}
}

% --- Theorem-like envs
\newtheorem{axiom}{Axiom}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

\usepackage[section]{placeins} % auto-places a FloatBarrier at each \section

% --- siunitx
\sisetup{
  separate-uncertainty = true,
  per-mode = symbol,
  detect-all = true
}

% --- Cleveref names
\crefname{equation}{eq.}{eqs.}
\Crefname{equation}{Eq.}{Eqs.}
\crefname{figure}{fig.}{figs.}
\Crefname{figure}{Fig.}{Figs.}
\crefname{table}{table}{tables}
\Crefname{table}{Table}{Tables}
\crefname{section}{\S}{\S\S}
\Crefname{section}{Section}{Sections}

% --- Lists
\setlist{itemsep=0.25em, topsep=0.25em}

% --- Shortcuts & notation
\newcommand{\Kk}{\mathrm{Kk}}                    % Kick unit (Hz)
\newcommand{\Ekk}{E_{\mathrm{Kk}}}               % E/h
\newcommand{\Mkk}{m_{\mathrm{Kk}}}               % mc^2/h
\newcommand{\Tkk}{T_{\mathrm{Kk}}}               % k_B T / h
\newcommand{\Pkk}{P_{\mathrm{Kk}}}               % P / h

\newcommand{\JJ}{J^{\mu}_I}                      % info 4-current
\newcommand{\jj}{\bm{j}}                         % spatial info flux
\newcommand{\ii}{i}                              % info density
\newcommand{\sig}{\sigma}                        % production

\newcommand{\Ainfo}{\mathcal{A}_I}               % info potential 1-form
\newcommand{\Finfo}{\mathcal{F}_I}               % info field 2-form
\newcommand{\Hinfo}{\mathcal{H}_I}               % info excitation

% Semantic label helpers (optional)
\newcommand{\labtitle}{\label{title:root}}
\newcommand{\labintro}[1][]{\label{introduction\if\relax\detokenize{#1}\relax\else:#1\fi}}
\newcommand{\labaxiom}[1]{\label{axiom:#1}}
\newcommand{\labcor}[1]{\label{corollary:#1}}
\newcommand{\labapp}[1]{\label{appendix:#1}}

% --- Equation numbering per section (optional)
\numberwithin{equation}{section}

% ======================================================================
% Focused additions (kept minimal; no renames to your existing macros)
% ======================================================================

% --- Boundary normals & worldtube side-integrand (moving boundary)
\newcommand{\nn}{\bm{n}}                          % outward unit normal
\newcommand{\jn}{j_n}                              % normal flux component (scalar)
\newcommand{\vn}{v_n}                              % normal speed of the boundary
\newcommand{\sideint}{\jj\!\cdot\!\nn - \ii\,\vn} % j·n - i v_n

% --- Screens & sectors (geometry helpers)
\newcommand{\Snm}{S_{n-1}}                         % area of unit (n-1)-sphere
\newcommand{\An}[1]{A_{#1}}                        % A_n
\newcommand{\Anr}[1]{A_{#1}(r)}                    % A_n(r)
\newcommand{\Adelta}{A_{\Delta}}                   % A_Δ
\newcommand{\Adeltar}{A_{\Delta}(r)}               % A_Δ(r)

% --- Windowed counting / noise (C6 & App. E)
\newcommand{\FA}{F_{A}}                            % Fano factor on a window
\newcommand{\teff}{\Delta t_{\mathrm{eff}}}        % effective window from autocorrelation
\newcommand{\JA}{J_{A}}                            % integrated flux across patch A
\newcommand{\jA}{j_{A}}                            % mean flux density on patch A

% --- Calibrated-equality adornment (consistency relations)
\newcommand{\calibeq}{\overset{\scriptscriptstyle\mathrm{cal}}{=}}

% --- Tiny prose helpers (optional; avoid "implies" phrasing)
\newcommand{\CutIdentity}{\textit{cut identity}}
\newcommand{\KKcompare}{\textit{may be compared to Kramers--Kronig on the chosen window}}
