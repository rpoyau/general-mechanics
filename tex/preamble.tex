% ======================================================================
% preamble.tex  (v0.9.1.1) — shared packages, macros, and formatting
% ======================================================================

% --- Packages
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{amsmath,amssymb,amsthm,mathtools}
\usepackage{bm}
\usepackage{physics}
\usepackage{microtype}
\usepackage{enumitem}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{hyperref}
\usepackage[nameinlink,capitalise]{cleveref}
\usepackage[section]{placeins} % auto-places a FloatBarrier at each \section

% --- Hyperref setup (make metadata match the manuscript title)
\hypersetup{
  colorlinks=true,
  linkcolor=blue!50!black,
  citecolor=blue!50!black,
  urlcolor=blue!50!black,
  pdfauthor={Reginald Poyau},
  pdftitle={General Mechanics}
}

% --- Theorem-like envs
\newtheorem{axiom}{Axiom}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

% --- siunitx
\sisetup{
  separate-uncertainty = true,
  per-mode = symbol,
  detect-all = true
}

% --- Cleveref names (consistent \cref/\Cref usage)
\crefname{equation}{eq.}{eqs.}
\Crefname{equation}{Eq.}{Eqs.}
\crefname{figure}{fig.}{figs.}
\Crefname{figure}{Fig.}{Figs.}
\crefname{table}{table}{tables}
\Crefname{table}{Table}{Tables}
\crefname{section}{\S}{\S\S}
\Crefname{section}{Section}{Sections}
\crefname{axiom}{axiom}{axioms}
\Crefname{axiom}{Axiom}{Axioms}
\crefname{definition}{definition}{definitions}
\Crefname{definition}{Definition}{Definitions}
\crefname{theorem}{theorem}{theorems}
\Crefname{theorem}{Theorem}{Theorems}
\crefname{proposition}{proposition}{propositions}
\Crefname{proposition}{Proposition}{Propositions}
\crefname{lemma}{lemma}{lemmas}
\Crefname{lemma}{Lemma}{Lemmas}
\crefname{corollary}{corollary}{corollaries}
\Crefname{corollary}{Corollary}{Corollaries}

% --- Lists
\setlist{itemsep=0.25em, topsep=0.25em}

% --- Equation numbering per section (optional)
\numberwithin{equation}{section}

% ======================================================================
% Shortcuts & notation
% ======================================================================

% --- Kick (Kz) units (canonical) + backward-compatible Kk macros
\newcommand{\Kz}{\mathrm{Kz}}                    % Kick unit (s^{-1})
\newcommand{\Ez}{E_{\mathrm{z}}}               % E/h
\newcommand{\Mz}{m_{\mathrm{z}}}               % mc^2/h
\newcommand{\Tz}{T_{\mathrm{z}}}               % k_B T / h
\newcommand{\Pz}{P_{\mathrm{z}}}               % P / h
% Back-compat: define Kk macros to point to Kz versions (harmless if unused)
\newcommand{\Kk}{\Kz}
\newcommand{\Ekk}{\Ez}
\newcommand{\Mkk}{\Mz}
\newcommand{\Tkk}{\Tz}
\newcommand{\Pkk}{\Pz}

% --- Informational current/density and production
\newcommand{\JJ}{J^{\mu}_I}                      % informational 4-current
\newcommand{\jj}{\bm{j}}                         % spatial information flux
\newcommand{\ii}{i}                              % information/entropy density
\newcommand{\sig}{\sigma}                        % production

% --- Informational potential/fields (form language)
\newcommand{\Ainfo}{\mathcal{A}_I}               % info potential 1-form
\newcommand{\Finfo}{\mathcal{F}_I}               % info field 2-form
\newcommand{\Hinfo}{\mathcal{H}_I}               % info excitation

% --- Boundary normals & worldtube side-integrand (moving boundary)
\newcommand{\nn}{\bm{n}}                          % outward unit normal
\newcommand{\jn}{j_n}                              % normal flux component (scalar)
\newcommand{\vn}{v_n}                              % normal speed of the boundary
\newcommand{\sideint}{\jj\!\cdot\!\nn - \ii\,\vn} % j·n - i v_n

% --- Boundaries & sectors (geometry helpers)
\newcommand{\Snm}{S_{n-1}}                         % area of unit (n-1)-sphere
\newcommand{\An}[1]{A_{#1}}                        % A_n
\newcommand{\Anr}[1]{A_{#1}(r)}                    % A_n(r)
\newcommand{\Adelta}{A_{\Delta}}                   % A_Δ
\newcommand{\Adeltar}{A_{\Delta}(r)}               % A_Δ(r)

% --- Windowed counting / noise (operational; used in main text and App. E)
\newcommand{\FA}{F_{A}}                            % Fano factor on a window
\newcommand{\teff}{\Delta t_{\mathrm{eff}}}        % effective window from autocorrelation
\newcommand{\JA}{J_{A}}                            % integrated inward counts across patch A
\newcommand{\jA}{j_{A}}                            % mean inward current density on patch A

% --- Semantic label helpers (optional)
\newcommand{\labtitle}{\label{title:root}}
\newcommand{\labintro}[1][]{\label{introduction\if\relax\detokenize{#1}\relax\else:#1\fi}}
\newcommand{\labaxiom}[1]{\label{axiom:#1}}
\newcommand{\labcor}[1]{\label{corollary:#1}}
\newcommand{\labapp}[1]{\label{appendix:#1}}

% --- Project helpers (worldtube tag, calibrated-equality mark)
\newcommand{\worldtube}{\emph{worldtube}}
\newcommand{\calibeq}{\overset{\scriptsize\mathrm{cal}}{=}}

\newcommand{\window}{\emph{window}}


% --- Tiny prose helpers (comparison-only phrasing; never as premises)
\newcommand{\CutIdentity}{\textit{cut identity}}
\newcommand{\KKcompare}{\textit{may be compared to Kramers--Kronig on the chosen window}}
